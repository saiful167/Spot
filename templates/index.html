<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spotify song Downloader | Saiful Islam</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: linear-gradient(135deg, #1db954 0%, #191414 100%); min-height: 100vh; color: white; font-family: sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.1); }
    </style>
</head>
<body class="flex items-center justify-center p-5">
    <div class="glass max-w-md w-full p-10 rounded-[2rem] shadow-2xl">
        <div class="text-center mb-10">
            <h1 class="text-4xl font-extrabold mb-2 tracking-tight">Spotify Downloader</h1>
            <p class="text-green-400 font-semibold uppercase tracking-widest text-xs">Developed by SAIFUL ISLAM</p>
        </div>

        <div class="space-y-6">
            <input type="text" id="spotifyUrl" placeholder="Paste Spotify Track Link..." 
                class="w-full p-5 rounded-2xl bg-black/50 border border-green-500/30 focus:outline-none focus:border-green-500 transition-all text-white">
            
            <button onclick="startDownload()" id="btn" class="w-full bg-green-500 hover:bg-green-400 text-black font-black py-5 rounded-2xl transition-all shadow-lg shadow-green-500/20 active:scale-95">
                DOWNLOAD MP3
            </button>
        </div>

        <div id="status" class="mt-8 text-center hidden">
            <div class="animate-bounce text-green-500 text-2xl mb-2">⬇️</div>
            <p id="msg" class="text-sm font-medium">Processing your request...
, please wait</p>
        </div>

        <div class="mt-12 pt-6 border-t border-white/5 text-center text-[10px] text-gray-500 tracking-widest">
            KERE TOI
CONTACT: saifulsajedul@gmail.com
        </div>
    </div>

    <script>
        async function startDownload() {
            const url = document.getElementById('spotifyUrl').value;
            const btn = document.getElementById('btn');
            const status = document.getElementById('status');
            const msg = document.getElementById('msg');

            if (!url) { alert('Please enter a link!'); return; }

            btn.disabled = true;
            btn.style.opacity = "0.5";
            status.classList.remove('hidden');

            try {
                const response = await fetch('/download', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ url: url })
                });

                if (response.ok) {
                    const blob = await response.blob();
                    const downloadUrl = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = downloadUrl;
                    a.download = "Saiful_Islam_Spotify_DL.mp3";
                    document.body.appendChild(a);
                    a.click();
                    msg.innerText = "Download Started!";
                } else {
                    msg.innerText = "Error: Something went wrong!";
                }
            } catch (e) {
                msg.innerText = "Error: Connection failed!";
            } finally {
                btn.disabled = false;
                btn.style.opacity = "1";
                setTimeout(() => { status.classList.add('hidden'); }, 7000);
            }
        }
    </script>
</body>
</html>

